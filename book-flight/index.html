<!DOCTYPE html>
<html lang="en">
 <head>
  <meta charset="utf-8"/>
  <meta content="width=device-width, initial-scale=1.0" name="viewport"/>
  <title>
   FlyDreamAir | Book Flight
  </title>
  <script src="https://cdn.tailwindcss.com">
  </script>
  <script>
   tailwind.config = {
      theme: {
        extend: {
          colors: {
            primary: '#262A3F',
            secondary: '#ADBBDA',
            highlight: '#BCC8FF',
            darkblue: '#1D2346',
            bgLight: '#F2F2F7',
            accentGray: '#D1D5DB',
          }
        }
      }
    }
  </script>
 </head>
 <body class="bg-bgLight font-sans text-#262A3F">
  <!-- Header -->
  <header class="flex justify-between items-center px-6 py-4 bg-white shadow-md">
   <h1 class="text-3xl font-bold">
    FlyDreamAir
   </h1>
   <nav class="space-x-12 hidden md:block text-base font-bold">
    <a class="hover:text-primary" href="#">
     Services
    </a>
    <a class="hover:text-primary" href="#">
     Manage Flight
    </a>
    <a class="hover:text-primary" href="#">
     Travel Info
    </a>
    <a class="hover:text-primary" href="#">
     About
    </a>
   </nav>
   <div class="flex items-center space-x-4">
    <button class="p-2 rounded-full bg-accentGray hover:bg-gray-300 transition">
     <svg class="w-5 h-5 text-darkblue" fill="none" stroke="currentColor" stroke-width="2" viewbox="0 0 24 24">
      <path d="M21 21l-4.35-4.35M16.65 10.25a6.4 6.4 0 11-12.8 0 6.4 6.4 0 0112.8 0z" stroke-linecap="round" stroke-linejoin="round">
      </path>
     </svg>
     <button class="text-#262A3F font-bold hover:text-primary transition">
      Login
     </button>
     <img alt="Profile" class="w-9 h-9 rounded-full" src="https://i.pravatar.cc/32"/>
    </button>
   </div>
  </header>
  <!-- Booking Summary -->
  <form id="flightSearchForm">
   <section class="bg-secondary p-4 rounded-xl mx-4 md:mx-auto max-w-5xl text-darkblue mt-6">
    <div class="flex flex-wrap justify-center md:justify-start gap-2 mb-4">
     <div>
      <select class="bg-[#8697C4] text-white text-sm px-4 py-1 rounded-full w-full" id="tripType">
       <option value="round-trip">
        Round Trip
       </option>
       <option value="one-way">
        One Way
       </option>
      </select>
     </div>
     <div>
      <div class="flex w-full">
       <select class="bg-[#8697C4] text-white text-sm px-4 py-1 rounded-l-full border-r-0 border border-[#8697C4] w-1/2" id="adultCount">
        <option value="0">
         0 Adult
        </option>
        <option value="1">
         1 Adult
        </option>
        <option value="2">
         2 Adults
        </option>
        <option value="3">
         3 Adults
        </option>
        <option value="4">
         4 Adults
        </option>
        <option value="5">
         5 Adults
        </option>
        <option value="6">
         6 Adults
        </option>
        <option value="7">
         7 Adults
        </option>
        <option value="8">
         8 Adults
        </option>
        <option value="9">
         9 Adults
        </option>
       </select>
       <select class="bg-[#8697C4] text-white text-sm px-4 py-1 rounded-r-full border-l-0 border border-[#8697C4] w-1/2" id="childCount">
        <option value="0">
         0 Child
        </option>
        <option value="1">
         1 Child
        </option>
        <option value="2">
         2 Children
        </option>
        <option value="3">
         3 Children
        </option>
        <option value="4">
         4 Children
        </option>
        <option value="5">
         5 Children
        </option>
        <option value="6">
         6 Children
        </option>
        <option value="7">
         7 Children
        </option>
        <option value="8">
         8 Children
        </option>
        <option value="9">
         9 Children
        </option>
       </select>
      </div>
     </div>
     <div>
      <select class="bg-[#8697C4] text-white text-sm px-4 py-1 rounded-full w-full" id="classType">
       <option value="Economy">
        Economy
       </option>
       <option value="Business Class">
        Business Class
       </option>
       <option value="First Class">
        First Class
       </option>
      </select>
     </div>
     <div class="ml-auto">
      <button class="bg-primary text-white font-semibold px-4 py-1 rounded-full hover:bg-darkblue transition text-sm" type="submit">
       Search Flights
      </button>
     </div>
    </div>
    <div class="flex items-center justify-center gap-4 mt-4 flex-wrap">
     <div class="bg-white rounded-xl px-6 py-3 shadow w-[459px] flex flex-col gap-1">
      <span class="text-xs font-bold" style="color: #262A3F;">
       DEPARTURE
      </span>
      <div class="flex items-center justify-between bg-white border border-gray-300 rounded-md px-3 py-2">
       <div class="flex items-center gap-2">
        <span class="text-base">
         âœˆ
        </span>
        <input class="w-20 text-sm outline-none" id="departure" placeholder="Enter departure city" type="text"/>
       </div>
       <input class="text-sm font-bold text-darkblue outline-none bg-transparent" id="departureDate" type="date"/>
      </div>
     </div>
     <div class="flex items-center justify-center">
      <div class="w-10 h-10 flex items-center justify-center rounded-full bg-white border border-gray-300 text-darkblue text-lg shadow">
       â‡†
      </div>
     </div>
     <div class="bg-white rounded-xl px-6 py-3 shadow w-[459px] flex flex-col gap-1">
      <span class="text-xs font-bold" style="color: #262A3F;">
       ARRIVAL
      </span>
      <div class="flex items-center justify-between bg-white border border-gray-300 rounded-md px-3 py-2">
       <div class="flex items-center gap-2">
        <span class="text-base">
         âœˆ
        </span>
        <input class="w-20 text-sm outline-none" id="arrival" placeholder="Enter arrival city" type="text"/>
       </div>
       <input class="text-sm font-bold text-darkblue outline-none bg-transparent" id="arrivalDate" type="date"/>
      </div>
     </div>
    </div>
   </section>
  </form>
  <!-- Step Progress -->
  <div class="bg-[#6AABDD] rounded-xl w-[1025px] mx-auto mt-6 shadow-md px-6 py-3 flex justify-between items-center text-white text-sm font-semibold">
   <!-- Step 1 -->
   <div class="flex flex-col items-center w-1/4 relative">
    <div class="absolute -top-8 bg-white text-[#263FAD] w-9 h-9 rounded-full flex items-center justify-center font-bold border border-gray-300">
     1
    </div>
    <span class="mt-3 text-darkblue font-bold">
     Choose Flight
    </span>
   </div>
   <!-- Step 2 -->
   <div class="flex flex-col items-center w-1/4 relative">
    <div class="absolute -top-8 bg-white text-[#6A7BD9] w-9 h-9 rounded-full flex items-center justify-center font-bold border border-gray-300">
     2
    </div>
    <span class="mt-3 text-white">
     Add-Ons
    </span>
   </div>
   <!-- Step 3 -->
   <div class="flex flex-col items-center w-1/4 relative">
    <div class="absolute -top-8 bg-white text-[#6A7BD9] w-9 h-9 rounded-full flex items-center justify-center font-bold border border-gray-300">
     3
    </div>
    <span class="mt-3 text-white">
     Seat Selection
    </span>
   </div>
   <!-- Step 4 -->
   <div class="flex flex-col items-center w-1/4 relative">
    <div class="absolute -top-8 bg-white text-[#6A7BD9] w-8 h-8 rounded-full flex items-center justify-center font-bold border border-gray-300">
     4
    </div>
    <span class="mt-3 text-white">
     Payment
    </span>
   </div>
  </div>
  <!-- Filter Buttons: Best / Cheapest / Quickest -->
  <div class="w-[1025px] mx-auto mt-4">
   <div class="flex justify-start gap-4">
    <button class="bg-primary text-white px-4 py-2 rounded-md hover:bg-secondary transition font-bold text-sm">
     Best
    </button>
    <button class="bg-accentGray text-darkblue px-4 py-2 rounded-md hover:bg-secondary hover:text-white transition font-bold text-sm">
     Cheapest
    </button>
    <button class="bg-accentGray text-darkblue px-4 py-2 rounded-md hover:bg-secondary hover:text-white transition font-bold text-sm">
     Quickest
    </button>
   </div>
  </div>
  <!-- Filter + Flight Results Section -->
  <section class="w-[1025px] mx-auto mt-8 grid grid-cols-1 md:grid-cols-4 gap-6 items-start">
   <!-- Filters -->
   <div class="space-y-6 md:col-span-1">
    <div>
     <h3 class="font-bold">
      PRICE RANGE
     </h3>
     <input class="w-full mt-2 accent-primary" max="5000" min="0" type="range" value="2500"/>
     <div class="text-sm flex justify-between text-gray-500">
      <span>
       $0
      </span>
      <span>
       $5000
      </span>
     </div>
    </div>
    <div>
     <h3 class="font-bold">
      LUGGAGE
     </h3>
     <label class="block mt-2">
      <input class="mr-2 accent-primary" type="checkbox"/>
      Carry-On Bag
     </label>
     <div class="flex items-center mt-2 space-x-2">
      <span>
       Luggage:
      </span>
      <button class="px-2 py-1 border rounded">
       -
      </button>
      <span>
       1
      </span>
      <button class="px-2 py-1 border rounded">
       +
      </button>
     </div>
    </div>
    <div>
     <h3 class="font-bold">
      STOPS
     </h3>
     <label class="block mt-2">
      <input class="mr-2 accent-primary" type="checkbox"/>
      No stops
     </label>
     <label class="block">
      <input class="mr-2 accent-primary" type="checkbox"/>
      1 stop
     </label>
     <label class="block">
      <input class="mr-2 accent-primary" type="checkbox"/>
      2+ stops
     </label>
    </div>
   </div>
   <!-- Flight Results (Right side) -->
   <div class="md:col-span-3 space-y-6">
    <!-- Flight Card -->
    <div class="border border-[#B8C4EB] rounded-xl p-4 flex flex-col md:flex-row justify-between items-center bg-white shadow w-full">
     <!-- Flight Results Section -->
     <div class="md:col-span-3 space-y-6 mt-6 w-[1025px] mx-auto" id="flightResults">
     </div>
    </div>
   </div>
  </section>
  <!-- Footer -->
  <footer class="text-sm text-center mt-12 mb-6 text-gray-500">
   <div class="space-x-4">
    <a class="hover:underline" href="#">
     Privacy and Cookie Policy
    </a>
    <a class="hover:underline" href="#">
     Website Terms and Use
    </a>
    <a class="hover:underline" href="#">
     Security
    </a>
    <a class="hover:underline" href="#">
     Accessibility
    </a>
    <a class="hover:underline" href="#">
     Site Map
    </a>
   </div>
   <p class="mt-2">
    Â© Copyright 2025 FlyDreamAir
   </p>
  </footer>
  <!-- JavaScript Logic -->
  <script>
   document.addEventListener("DOMContentLoaded", () => {
      const searchData = JSON.parse(localStorage.getItem("flightSearch")) || {};

      // Populate input values
      document.getElementById("tripType").value = searchData.tripType || "round-trip";
      document.getElementById("adultCount").value = searchData.adults || "1";
      document.getElementById("childCount").value = searchData.children || "0";
      document.getElementById("classType").value = searchData.classType || "Economy";
      document.getElementById("departure").value = searchData.departure || "";
      document.getElementById("arrival").value = searchData.arrival || "";

      if (searchData.departureDate) {
        document.getElementById("departureDate").value = searchData.departureDate;
      }
      if (searchData.arrivalDate) {
        document.getElementById("arrivalDate").value = searchData.arrivalDate;
      }


      renderFlightCards(searchData);

      // Form submit with Enter key
      document.getElementById("flightSearchForm").addEventListener("submit", function (e) {
        e.preventDefault();

        const updatedSearch = {
          tripType: document.getElementById("tripType").value,
          adults: document.getElementById("adultCount").value,
          children: document.getElementById("childCount").value,
          classType: document.getElementById("classType").value,
          departure: document.getElementById("departure").value.trim(),
          arrival: document.getElementById("arrival").value.trim(),
          departureDate: document.getElementById("departureDate").value,
          arrivalDate: document.getElementById("arrivalDate").value
        };

        localStorage.setItem("flightSearch", JSON.stringify(updatedSearch));
        renderFlightCards(updatedSearch);
      });
    });

    // Mock flight data
    const flights = [
      {
        id: "F101",
        from: "SYD",
        to: "MNL",
        date: "2025-04-07",
        departTime: "10:10",
        arriveTime: "17:00",
        returnDepartTime: "21:15",
        returnArriveTime: "08:00",
        departDate: "Mon, April 7",
        returnDate: "Fri, April 11",
        returnISODate: "2025-04-11",
        duration: "8h 50m",
        returnDuration: "8h 45m",
        returnFrom: "MNL",
        returnTo: "SYD",
        price: 697,
        class: "Economy"
      },
      {
        id: "F102",
        from: "SYD",
        to: "MNL",
        date: "2025-04-07",
        departTime: "06:00",
        arriveTime: "13:00",
        returnDepartTime: "20:00",
        returnArriveTime: "05:00",
        departDate: "Mon, April 7",
        returnDate: "Fri, April 11",
        returnISODate: "2025-04-11",
        duration: "7h",
        returnDuration: "9h",
        returnFrom: "MNL",
        returnTo: "SYD",
        price: 750,
        class: "Economy"
      },
      // Add more flights as needed
    ];

    function renderFlightCards(searchData) {
      const flightContainer = document.getElementById("flightResults");
      flightContainer.innerHTML = "";

      const matchedFlights = flights
        .filter(f =>
          f.from.toLowerCase() === searchData.departure?.toLowerCase() &&
          f.to.toLowerCase() === searchData.arrival?.toLowerCase() &&
          f.date === searchData.departureDate &&
          f.returnISODate === searchData.arrivalDate &&  
          f.class === searchData.classType
        )
        .sort((a, b) => a.departTime.localeCompare(b.departTime));

      if (matchedFlights.length === 0) {
        flightContainer.innerHTML = "<p class='text-center text-gray-500'>No matching flights found.</p>";
        return;
      }

      matchedFlights.forEach(flight => {
        const card = document.createElement("div");
        card.className = "border border-[#B8C4EB] rounded-xl p-4 flex flex-col md:flex-row justify-between items-center bg-white shadow w-full";

        card.innerHTML = `
          <div class="flex flex-col space-y-4 w-full md:w-4/5">
            <div class="flex items-center justify-between w-full">
              <div class="text-left">
                <div class="font-bold text-lg">${flight.departTime}</div>
                <div class="text-sm font-semibold text-gray-800">${flight.from}</div>
                <div class="text-sm text-gray-500">${flight.departDate}</div>
              </div>
              <div class="flex flex-col items-center text-xs text-gray-700">
                <div class="flex items-center space-x-2">
                  <span>ðŸ›«</span><span>${flight.duration}</span><span>ðŸ›¬</span>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-lg">${flight.arriveTime}</div>
                <div class="text-sm font-semibold text-gray-800">${flight.to}</div>
                <div class="text-sm text-gray-500">${flight.departDate}</div>
              </div>
            </div>
            <div class="flex items-center justify-between w-full">
              <div class="text-left">
                <div class="font-bold text-lg">${flight.returnDepartTime}</div>
                <div class="text-sm font-semibold text-gray-800">${flight.returnFrom}</div>
                <div class="text-sm text-gray-500">${flight.returnDate}</div>
              </div>
              <div class="flex flex-col items-center text-xs text-gray-700">
                <div class="flex items-center space-x-2">
                  <span>ðŸ›«</span><span>${flight.returnDuration}</span><span>ðŸ›¬</span>
                </div>
              </div>
              <div class="text-right">
                <div class="font-bold text-lg">${flight.returnArriveTime}</div>
                <div class="text-sm font-semibold text-gray-800">${flight.returnTo}</div>
                <div class="text-sm text-gray-500">${flight.returnDate}</div>
              </div>
            </div>
          </div>
          <div class="hidden md:block h-[120px] border-l-2 border-[#8697C4] mx-8"></div>
          <div class="text-center w-full md:w-auto mt-4 md:mt-0">
            <div class="text-2xl font-extrabold text-[#262A3F]">$${flight.price.toFixed(2)}</div>
            <button onclick='bookFlight(${JSON.stringify(flight)})' class="mt-2 px-6 py-2 bg-[#C9D3EE] text-[#262A3F] rounded-lg font-semibold hover:bg-[#B5C0E0] transition">
              Book
            </button>
          </div>
        `;
        flightContainer.appendChild(card);
      });
    }

    function bookFlight(flight) {
      localStorage.setItem("selectedFlight", JSON.stringify(flight));
      const bookingDetails = {
        tripType: document.getElementById("tripType").value,
        adults: document.getElementById("adultCount").value,
        children: document.getElementById("childCount").value,
        classType: document.getElementById("classType").value,
        departure: document.getElementById("departure").value,
        arrival: document.getElementById("arrival").value,
        departureDate: document.getElementById("departureDate").value,
        arrivalDate: document.getElementById("arrivalDate").value
      };
      localStorage.setItem("bookingInfo", JSON.stringify(bookingDetails));
      window.location.href = "addons.html";
    }
  </script>
 </body>
</html>
